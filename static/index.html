<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì…ì ì‚¬ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/imagekit-javascript/dist/imagekit.min.js"></script>
  

  <style>
    /* ì˜¤ë¥¸ìª½ ëŒ€ì‹œë³´ë“œ ì „ì²´ ë„ˆë¹„ ì±„ìš°ê¸° ë³´ì • */
    main {
      flex: 1;
      padding: 20px;
      background-color: #f1f2f6;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* ì œí’ˆê´€ë¦¬ í•˜ìœ„ ë©”ë‰´ ìˆ¨ê¹€ */
    .submenu {
      display: none;
      padding-left: 15px;
    }
    .submenu.show {
      display: block;
    }
    nav li {
      cursor: pointer;
    }
    
    /* í™œì„± ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸ */
    .nav-menu.active {
      background-color: rgba(255, 255, 255, 0.1);
      padding-left: 10px;
      border-left: 3px solid #fff;
    }

    /* (ê³µìš©) ëª¨ë‹¬ í”„ë ˆì„ â€” íŒì—…ì²˜ëŸ¼ ë³´ì´ê²Œ í° ì‚¬ì´ì¦ˆ */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:999;display:none}
    .modal{background:#fff;border-radius:12px;max-width:780px;width:90%;max-height:80vh;overflow:auto;
           margin:0 auto;position:relative;top:50%;transform:translateY(-50%);box-shadow:0 10px 30px rgba(0,0,0,.15)}
    .modal-header,.modal-footer{display:flex;justify-content:space-between;align-items:center;padding:12px 16px}
    .modal-body{padding:16px}
    .icon-btn{background:transparent;border:0;cursor:pointer;font-size:18px}
    


    .modal.seller-dashboard-modal {
    max-width: 90vw !important;
    width: 90vw !important;
}


    /* ë„¤ë¹„ í•˜ë‹¨ ì—…ë¡œë“œ ë²„íŠ¼ ì˜ì—­ */
    .nav-upload-wrap{margin-top:auto;padding:12px 0}
    .upload-btn{width:100%;padding:10px;border:0;border-radius:8px;background:#2563eb;color:#fff;cursor:pointer}
    .upload-hint{font-size:12px;color:#64748b;margin-top:6px}
    nav {display:flex; flex-direction:column;}
    
    /* ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .logout-btn {
      width: 100%;
      padding: 10px;
      border: 0;
      border-radius: 8px;
      background: #5471f1;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s;
    }
    .logout-btn:hover {
      background: #89b5f7;
    }
    
    /* ì œí’ˆ í…Œì´ë¸” ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
    .product-table img {
      width: 50px;
      height: 50px;
      object-fit: cover;
      cursor: pointer;
      border-radius: 4px;
    }
    
    .product-table img:hover {
      transform: scale(1.1);
      transition: transform 0.2s;
    }
    
    /* ì¸ë¼ì¸ í¸ì§‘ ì…ë ¥ í•„ë“œ */
    .product-table input[type="text"],
    .product-table input[type="number"] {
      padding: 4px;
      border: 1px solid #007bff;
      border-radius: 3px;
      font-size: 13px;
    }
    
    /* ë¹„í™œì„± ì œí’ˆ ìŠ¤íƒ€ì¼ */
    .product-table tr[data-product-id] {
      transition: opacity 0.3s;
    }
    
    /* ì‘ì—… ë²„íŠ¼ë“¤ ìŠ¤íƒ€ì¼ */
    .product-table td button {
      padding: 4px 8px;
      margin: 2px;
      font-size: 11px;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }
    
    .product-table td button:hover {
      opacity: 0.8;
    }
    
    /* ì œí’ˆ ë“±ë¡ ë²„íŠ¼ */
    button[onclick*="openCreateProductModal"] {
      font-weight: 600;
    }
    
    button[onclick*="openCreateProductModal"]:hover {
      background: #218838 !important;
    }
  </style>
</head>
<body>
  <!-- ì „ì²´ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ -->
  <div class="container">

    <!-- ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav>
      <h2>ê´€ë¦¬ì ë©”ë‰´</h2>
       <!-- ê³„ì • ì •ë³´ í‘œì‹œ ì˜ì—­ ì¶”ê°€ -->
    <div id="userInfoBox" style="
        margin: 15px 10px 25px 10px;
        padding: 12px 15px;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        border-radius: 8px;
        border-left: 4px solid #4a90e2;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    ">
        <div style="
            font-size: 11px;
            color: #a8c0e8;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        ">ê³„ì • ì •ë³´</div>
        <div id="userDisplayName" style="
            font-weight: 600;
            color: #ffffff;
            font-size: 15px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        ">
            <span style="opacity: 0.5;">ë¡œë”©ì¤‘...</span>
        </div>
    </div>
      <ul>
        <li id="menu-overview" class="nav-menu">íŒë§¤í˜„í™©</li>
        <li id="menu-product-toggle" class="nav-menu">ì œí’ˆê´€ë¦¬</li>
        <ul id="product-submenu" class="submenu">
          <li id="menu-products" class="nav-menu">- íŒë§¤ì¤‘ì¸ ì œí’ˆ</li>
          <li id="menu-orders" class="nav-menu">- ì£¼ë¬¸ì„œ ìš”ì•½</li>
        </ul>
        <li id="menu-sellers" class="nav-menu">ì…ì ì‚¬ë³„ íŒë§¤í˜„í™©</li>
        <li id="menu-account" class="nav-menu">ê³„ì •ê´€ë¦¬</li>
        <li id="menu-settings" class="nav-menu">ì„¤ì •</li>
      </ul>


 <!-- ë„¤ë¹„ í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ (ì ˆëŒ€ ìœ„ì¹˜) -->
<div style="position: absolute; bottom: 0; left: 0; right: 0; padding: 20px;">
    <!-- ì£¼ë¬¸ì„œ ì—…ë¡œë“œ -->
    <button id="uploadExcelBtn" 
        onclick="document.getElementById('fileInputOrders').click()"
        style="width: 100%; margin-bottom: 8px; display: none;">
        ğŸ—‚ ì£¼ë¬¸ì„œ ì—…ë¡œë“œ
    </button>
    <input id="fileInputOrders" type="file" accept=".xlsx,.xls,.csv" style="display:none;">
    <div id="uploadHint" class="upload-hint" 
     style="font-size: 11px; color: #94a3b8; text-align: center; margin-bottom: 15px; display: none;">
    ì—‘ì…€(.xlsx, .xls) ë˜ëŠ” CSV ì—…ë¡œë“œ
</div>
    
    <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
    <button onclick="window.API.logout()" class="logout-btn" style="width: 100%;">
         ë¡œê·¸ì•„ì›ƒ
    </button>
</div>
      
      
    </nav>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main>
      <!-- ìš”ì•½ ì„¹ì…˜ -->
      <div id="summarySection" class="dashboard-section">
        <div class="section-title">ìš”ì•½</div>
        <div class="summary-boxes">
                  <div class="summary-box">
            <div style="font-weight: 600; margin-bottom: 10px;">ëˆ„ì </div>
            <div id="totalRevenue">-</div>
            <div id="totalSales">-</div>
          </div>
          <div class="summary-box">
            <div style="font-weight: 600; margin-bottom: 10px;">ì´ë²ˆë‹¬</div>
            <div id="monthRevenue">-</div>
            <div id="monthSales">-</div>
          </div>
          <div class="summary-box">
            <div style="font-weight: 600; margin-bottom: 10px;">ì´ë²ˆì£¼</div>
            <div id="weekRevenue">-</div>
            <div id="weekSales">-</div>
          </div>
          <div class="summary-box">
            <div style="font-weight: 600; margin-bottom: 10px;">ì „ì¼</div>
            <div id="todayRevenue">-</div>
            <div id="todaySales">-</div>
          </div>
        </div>
      </div>
        <!-- ì—…ë¡œë“œ ì§„í–‰ ì˜¤ë²„ë ˆì´ -->
<!-- ì—…ë¡œë“œ ì§„í–‰ ì˜¤ë²„ë ˆì´ (3ë‹¨ê³„) -->
<div id="uploadOverlay" style="display: none;">
    <div class="upload-modal">
        <div class="upload-icon">ğŸ“Š</div>
        <h3>ì—‘ì…€ íŒŒì¼ ì²˜ë¦¬ ì¤‘...</h3>
        
        <!-- 3ë‹¨ê³„ í”„ë¡œê·¸ë ˆìŠ¤ -->
        <div class="multi-progress">
            <!-- ë‹¨ê³„ 1: íŒŒì¼ ì—…ë¡œë“œ -->
            <div class="progress-item">
                <div class="progress-label">
                    <span class="step-icon" id="step1Icon">â³</span>
                    <span>íŒŒì¼ ì—…ë¡œë“œ</span>
                    <span class="progress-percent" id="upload-percent">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="uploadProgress" class="progress-fill"></div>
                </div>
            </div>
            
            <!-- ë‹¨ê³„ 2: ë°ì´í„° íŒŒì‹± -->
            <div class="progress-item">
                <div class="progress-label">
                    <span class="step-icon" id="step2Icon">â³</span>
                    <span>ë°ì´í„° íŒŒì‹±</span>
                    <span class="progress-percent" id="parse-percent">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="parseProgress" class="progress-fill"></div>
                </div>
            </div>
            
            <!-- ë‹¨ê³„ 3: í†µê³„ ê³„ì‚° -->
            <div class="progress-item">
                <div class="progress-label">
                    <span class="step-icon" id="step3Icon">â³</span>
                    <span>í†µê³„ ê³„ì‚°</span>
                    <span class="progress-percent" id="stats-percent">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="statsProgress" class="progress-fill"></div>
                </div>
            </div>
        </div>
        
        <div id="uploadStatus" class="upload-status">ì¤€ë¹„ ì¤‘...</div>
        <div id="uploadDetails" class="upload-details"></div>
    </div>
</div>

<!-- ìš”ì•½ ì„¹ì…˜ ë‹¤ìŒì— ì¶”ê°€ -->
<div id="lastMonthSection" class="dashboard-section" style="margin-top: 20px; display: none;">
  <div class="section-title">
    <span id="lastMonthTitle">ì „ì›” ì‹¤ì </span>
  </div>
  
  <div style="display: flex; gap: 20px; padding: 20px; background: white; border-radius: 8px;">
    <!-- ì™¼ìª½: í•µì‹¬ ì§€í‘œ (ê·¸ëŒ€ë¡œ) -->
    <div style="flex: 0 0 200px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
      <h4 style="margin-bottom: 20px;">í•µì‹¬ ì§€í‘œ</h4>
      <div class="metric-grid">
        <div class="metric-item admin-only">
          <span class="metric-label">ë§¤ì¶œì›ê°€</span>
          <span class="metric-value" id="lastMonthSupply">-</span>
        </div>
        <div class="metric-item">
          <span class="metric-label" id="revenueLabel">ë§¤ì¶œì•¡</span>
          <span class="metric-value" id="lastMonthRevenue">-</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">íŒë§¤ëŸ‰</span>
          <span class="metric-value" id="lastMonthQuantity">-</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">ì£¼ë¬¸ê±´ìˆ˜</span>
          <span class="metric-value" id="lastMonthOrders">-</span>
        </div>
      </div>
    </div>
    
    <!-- ì¤‘ì•™: ì›í˜• ì°¨íŠ¸ (í¬ê²Œ, ì˜¤ë¥¸ìª½ìœ¼ë¡œ) -->
    <div style="flex: 0 0 400px; text-align: center; margin-left: 30px;">
      <h4 style="margin-bottom: 15px;">ì œí’ˆë³„ ë§¤ì¶œ ë¹„ì¤‘</h4>
      <canvas id="lastMonthPieChart" width="350" height="350"></canvas>
    </div>
    
    <!-- ì˜¤ë¥¸ìª½: ì œí’ˆ ëª©ë¡ -->
    <div style="flex: 1; padding: 0 20px;">
  <h4 style="margin-bottom: 15px;">ìƒìœ„ ì œí’ˆ</h4>
  <div id="lastMonthLegend" style="
    height: 280px;  /* 3.5ê°œ í•­ëª©ì´ ë³´ì´ëŠ” ë†’ì´ */
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 10px;
  ">
        <!-- ë²”ë¡€ê°€ ì—¬ê¸° í‘œì‹œë¨ -->
      </div>
    </div>
  </div>
</div>

<style>
.metric-grid {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.metric-item {
  padding: 10px;
  background: white;
  border-radius: 6px;
  border-left: 3px solid #007bff;
}

.metric-label {
  display: block;
  font-size: 12px;
  color: #666;
  margin-bottom: 5px;
}

.metric-value {
  display: block;
  font-size: 18px;
  font-weight: bold;
  color: #333;
}
</style>

      <!-- í•„í„° ë²„íŠ¼ ì˜ì—­ -->
      <div class="filter-tabs" id="filterTabs" style="display: none;">
        <button class="filter-btn active" onclick="setChartView('monthly', event)">ì›”ë³„</button>
        <button class="filter-btn" onclick="setChartView('daily', event)">ì¼ë³„</button>
        <button class="filter-btn" onclick="setChartView('range', event)">íŠ¹ì •ê¸°ê°„</button>
        <span id="dateRangeText">ê¸°ê°„ ì„ íƒ:</span>
        <input type="date" id="startDate">
        <input type="date" id="endDate">
        <button id="applyRange" onclick="applyRangeChart()">ì ìš©</button>

        <!-- ì œí’ˆ í•„í„° + ì„ íƒ íƒœê·¸ + ì´ˆê¸°í™” -->
        <div class="product-filter-section">
          <button id="productFilterBtn" class="filter-btn">ì œí’ˆ í•„í„°</button>
          <button id="resetFilterBtn" class="filter-btn reset-btn">í•„í„° ì´ˆê¸°í™”</button>
          <div id="selectedProducts" class="selected-products"></div>
        </div>
      </div>

      <div class="dashboard-section">
        <div class="section-title">ì…ì ì‚¬ ë§¤ì¶œ í˜„í™©</div>
        <canvas id="revenueChart"></canvas>
      </div>

      <div class="dashboard-section">
        <div class="section-title">ì…ì ì‚¬ íŒë§¤ëŸ‰ í˜„í™©</div>
        <canvas id="salesChart"></canvas>
      </div>

       <!-- TOP5 ë­í‚¹ ì„¹ì…˜ (íŒë§¤í˜„í™©ì—ì„œë§Œ í‘œì‹œ) -->
      <div id="rankingsSection" class="dashboard-section" style="display: none;">
        <div class="section-title">TOP 5 ë­í‚¹</div>
        
        <!-- ë§¤ì¶œ TOP5 -->
        <div style="margin-bottom: 30px;">
          <h4>ë§¤ì¶œ TOP 5</h4>
          <div style="display: flex; gap: 15px;">
            <div class="ranking-card">
              <div class="ranking-title">ëˆ„ì </div>
              <div id="revenueCumulative"></div>
            </div>
            <div class="ranking-card">
              <div class="ranking-title">2025ë…„</div>
              <div id="revenueYear"></div>
            </div>
            <div class="ranking-card">
              <div class="ranking-title">ì´ë²ˆë‹¬</div>
              <div id="revenueMonth"></div>
            </div>
            <div class="ranking-card">
              <div class="ranking-title">ì´ë²ˆì£¼</div>
              <div id="revenueWeek"></div>
            </div>
          </div>
        </div>
        
        <!-- íŒë§¤ëŸ‰ TOP5 -->
        <div>
          <h4>íŒë§¤ëŸ‰ TOP 5</h4>
          <div style="display: flex; gap: 15px;">
            <div class="ranking-card">
              <div class="ranking-title">ëˆ„ì </div>
              <div id="quantityCumulative"></div>
            </div>
            <div class="ranking-card">
              <div class="ranking-title"><span id="currentYear"></span>ë…„</div>
              <div id="quantityYear"></div>
            </div>
            <div class="ranking-card">
              <div class="ranking-title">ì´ë²ˆë‹¬</div>
              <div id="quantityMonth"></div>
            </div>
            <div class="ranking-card">
              <div class="ranking-title">ì´ë²ˆì£¼</div>
              <div id="quantityWeek"></div>
            </div>
          </div>
        </div>
      </div>

<!-- ë‚˜ë¨¸ì§€ë„ ë™ì¼í•˜ê²Œ id ì¶”ê°€ -->

      <!-- ì…ì ì‚¬ ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ -->
      <div id="sellerListSection" class="dashboard-section" style="display: none;">
        <div class="section-title">ì…ì ì‚¬ ë¦¬ìŠ¤íŠ¸</div>

        <!-- ê²€ìƒ‰ì°½ -->
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
          <input type="text" id="searchBox" placeholder="ì…ì ì‚¬ ì´ë¦„ ê²€ìƒ‰" style="width: 250px; padding: 6px;">
          <button onclick="searchSeller()">ê²€ìƒ‰</button>
        </div>

        <!-- ì…ì ì‚¬ ìƒì„±/ì‚­ì œ ë²„íŠ¼ -->
        <div style="display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 10px;">
          <button onclick="openAddSellerModal()">ì…ì ì‚¬ ìƒì„±</button>
          <button onclick="deleteSelectedSellers()">ì„ íƒ ì‚­ì œ</button>
        </div>

        <!-- í‘œ í˜•íƒœ ë¦¬ìŠ¤íŠ¸ -->
        <table class="product-table">
          <thead>
            <tr>
              <th><input type="checkbox" onclick="toggleAllSellers(this)"></th>
              <th>ì…ì ì‚¬ëª…</th>
              <th>ë“±ë¡ ì œí’ˆ ìˆ˜</th>
              <th>íŒë§¤ì¤‘ì¸ ì œí’ˆ</th>
              <th>ëˆ„ì  íŒë§¤ì•¡</th>
              <th>ëˆ„ì  íŒë§¤ ìˆ˜ëŸ‰</th>
              <th>íŒë§¤í˜„í™© ë³´ê¸°</th>
              <th>ìˆ˜ì •</th>
            </tr>
          </thead>
          <tbody id="sellerListTableBody">
            <!-- JavaScriptë¡œ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
          </tbody>
        </table>
      </div>

      <!-- ğŸ“¦ íŒë§¤ì¤‘ì¸ ì œí’ˆ ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ -->
      <div id="productListSection" class="dashboard-section" style="display: none;">
        <div class="section-title">íŒë§¤ì¤‘ì¸ ì œí’ˆ</div>

        <!-- ğŸ” ê²€ìƒ‰ì°½ -->
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
          <input type="text" id="productSearchInput" 
                 placeholder="ì œí’ˆëª… ë˜ëŠ” ì œí’ˆì½”ë“œ ê²€ìƒ‰" 
                 style="width: 250px; padding: 6px;">
          <button id="productSearchBtn">ê²€ìƒ‰</button>
        </div>

        <!-- ê´€ë¦¬ììš© ì…ì ì‚¬ í•„í„° ë²„íŠ¼ ì¶”ê°€ -->
        <button id="sellerFilterBtnForList" onclick="openSellerFilterModalForList()" 
                style="padding: 8px 15px; background: #17a2b8; color: white; 
                       border: none; border-radius: 4px; display: none;">
            ì…ì ì‚¬ í•„í„°
        </button>

        <!-- â• ì œí’ˆ ìƒì„±/ì‚­ì œ ë²„íŠ¼ -->
<!-- â• ì œí’ˆ ìƒì„±/ì‚­ì œ ë²„íŠ¼ -->
<div style="display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 10px;">
    
    <button id="createProductBtn" 
            onclick="openCreateProductModal()" 
            style="padding: 8px 15px; background: #28a745; color: white; 
                   border: none; border-radius: 4px; cursor: pointer;">
        ì œí’ˆ ë“±ë¡
    </button>
    <button id="deleteSelectedBtn"
            onclick="deleteSelectedProducts()" 
            style="padding: 8px 15px; background: #dc3545; color: white; 
                   border: none; border-radius: 4px; cursor: pointer;">
        ì„ íƒ ì‚­ì œ
    </button>
</div>

        <!-- ğŸ“‹ ì œí’ˆ ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸” -->
        <table class="product-table">
          <thead>
            <tr>
              <th style="width: 40px;">
              <input type="checkbox" onclick="toggleAllProducts(this)">
              <th style="width: 60px;">ì´ë¯¸ì§€</th>
              <th>ì œí’ˆëª…</th>
              <th>ì œí’ˆì½”ë“œ</th>
              <th>ê³µê¸‰ì‚¬</th>
              <th class="admin-only">ì¬ê³ ìˆ˜ëŸ‰</th>
              <th>í˜„ì¬ìˆ˜ëŸ‰</th>
              <th>ê³µê¸‰ê°€</th>
              <th class="admin-only">íŒë§¤ê°€</th>
              <th style="width: 80px;">ìƒì„¸ë³´ê¸°</th>
              <th style="width: 80px;">íŒë§¤ê¸°ë¡</th>
              <th style="width: 140px;">ì‘ì—…</th>
            </tr>
          </thead>
          <tbody id="productListTableBody">
            <!-- JSë¡œ ë™ì  ìƒì„± -->
          </tbody>
        </table>
        
        <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ í‘œì‹œ ì˜ì—­ -->
        <div id="pagination" style="text-align: center; margin-top: 15px;"></div>
      </div>

      <!-- ì£¼ë¬¸ì„œ ìš”ì•½ ì„¹ì…˜ -->
      <div id="orderSummarySection" class="dashboard-section" style="display: none;">
        <div class="section-title">ì£¼ë¬¸ì„œ ìš”ì•½</div>


    <!-- ê²€ìƒ‰ ë° í•„í„° ì˜ì—­ ì¶”ê°€ -->
<div style="margin: 15px 0;">
    <!-- 1ì¤„: ê²€ìƒ‰ë°”, ê²€ìƒ‰ë²„íŠ¼ / ë‚ ì§œ í•„í„° / ì œí’ˆì„ íƒ / ì…ì ì‚¬ì„ íƒ -->
    <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
        <!-- ê²€ìƒ‰ ì˜ì—­ -->
        <input type="text" id="orderSearchInput" 
               placeholder="ì£¼ë¬¸ë²ˆí˜¸, êµ¬ë§¤ìID, ì œí’ˆëª… ê²€ìƒ‰" 
               style="width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
               onkeyup="if(event.key==='Enter') searchOrders()">
        <button onclick="searchOrders()" 
                style="padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 4px;">
            ê²€ìƒ‰
        </button>
        
        <div style="width: 1px; height: 24px; background: #ddd; margin: 0 10px;"></div> <!-- êµ¬ë¶„ì„  -->
        
        <!-- ë‚ ì§œ í•„í„° -->
        <span style="font-weight: 600;">ë‚ ì§œ:</span>
        <input type="date" id="orderStartDate" onchange="filterOrders()"
               style="padding: 6px; border: 1px solid #ddd; border-radius: 4px;">
        <span>~</span>
        <input type="date" id="orderEndDate" onchange="filterOrders()"
               style="padding: 6px; border: 1px solid #ddd; border-radius: 4px;">
        
        <div style="width: 1px; height: 24px; background: #ddd; margin: 0 10px;"></div> <!-- êµ¬ë¶„ì„  -->
        
        <!-- ì œí’ˆ ì„ íƒ ë²„íŠ¼ -->
        <button onclick="openOrderProductFilterModal()" 
                style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px;">
            ì œí’ˆ ì„ íƒ
        </button>
        
        <!-- ì…ì ì‚¬ ì„ íƒ (ê´€ë¦¬ìë§Œ) -->
        <button onclick="openSellerFilterModal()" 
        style="padding: 8px 15px; background: #6c757d; color: white; border: none; border-radius: 4px; display: none;"
        class="admin-only" id="sellerFilterBtn">
          ì…ì ì‚¬ ì„ íƒ
      </button>

      <!-- ë¯¸ë“±ë¡ ì œí’ˆ ë³´ê¸° ë²„íŠ¼ ì¶”ê°€ -->
        <button onclick="toggleUnmatchedFilter()" 
                style="padding: 8px 15px; background: #dc3545; color: white; border: none; border-radius: 4px; display: none;"
                class="admin-only" id="unmatchedFilterBtn">
            ë¯¸ë“±ë¡ ì œí’ˆ ë³´ê¸°
        </button>

      <span id="selectedSellerName" style="margin-left: 10px; font-weight: 600;"></span>
    </div>
    
    <!-- 2ì¤„: ìƒíƒœí•„í„° / í•„í„° ì´ˆê¸°í™” -->
    <div style="display: flex; gap: 10px; align-items: center;">
        <!-- ìƒíƒœ í•„í„° -->
        <span style="font-weight: 600;">ìƒíƒœ:</span>
        <select id="orderStatusFilter" onchange="filterOrders()" 
                style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; min-width: 120px;">
            <option value="">ì „ì²´ ìƒíƒœ</option>
            <option value="ë°œì†¡ëŒ€ê¸°">ë°œì†¡ëŒ€ê¸°</option>
            <option value="ë°°ì†¡ì¤‘">ë°°ì†¡ì¤‘</option>
            <option value="í†µê´€ì¤‘">í†µê´€ì¤‘</option>
            <option value="ë°°ì†¡ì™„ë£Œ">ë°°ì†¡ì™„ë£Œ</option>
            <option value="ì£¼ë¬¸ì·¨ì†Œ">ì£¼ë¬¸ì·¨ì†Œ</option>
            <option value="í™˜ë¶ˆ/êµí™˜">í™˜ë¶ˆ/êµí™˜</option>
        </select>
        
        <div style="width: 1px; height: 24px; background: #ddd; margin: 0 10px;"></div> <!-- êµ¬ë¶„ì„  -->
        
        <!-- í•„í„° ì´ˆê¸°í™” -->
        <button onclick="resetOrderFilters()" 
                style="padding: 8px 15px; background: #6c757d; color: white; border: none; border-radius: 4px;">
            í•„í„° ì´ˆê¸°í™”
        </button>
        
        <!-- ì„ íƒëœ ì œí’ˆ íƒœê·¸ í‘œì‹œ ì˜ì—­ -->
        <div id="selectedOrderProducts" style="margin-left: 20px; display: inline-flex; gap: 5px; flex-wrap: wrap;">
            <!-- ì„ íƒëœ ì œí’ˆ íƒœê·¸ê°€ ì—¬ê¸° í‘œì‹œë¨ -->
        </div>
    </div>
    
    
</div>
    
    <table class="product-table">
    <thead>
      <tr>
        <th style="width: 40px;">ë²ˆí˜¸</th> 
        <th style="width: 100px;">ì£¼ë¬¸ë²ˆí˜¸</th>
        <th style="width: 250px;">ì œí’ˆëª…</th>
        <th style="width: 40px;">ìˆ˜ëŸ‰</th>
        <th style="width: 80px;">ì´ì•¡</th>
        <th class="admin-only" style="width: 80px;">ì´ì•¡(íŒë§¤ê°€)</th>
        <th style="width: 80px;">êµ¬ë§¤ì</th>
        <th style="width: 100px;">ë‚ ì§œ</th>
        <th style="width: 80px;">ìƒíƒœ</th>
        <th style="width: 60px;">ì‘ì—…</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
</table>
      </div>

      <!-- ê³„ì •ê´€ë¦¬ ì„¹ì…˜ -->
      <div id="accountManagementSection" class="dashboard-section" style="display: none;">
        <div class="section-title">ê³„ì •ê´€ë¦¬</div>

        <!-- ê²€ìƒ‰ì°½ -->
        <div style="display: flex; gap: 8px; margin-bottom: 10px;">
          <input type="text" id="accountSearchInput" 
                 placeholder="ì•„ì´ë”” ë˜ëŠ” ì…ì ì‚¬ëª… ê²€ìƒ‰" 
                 style="width: 250px; padding: 6px;">
          <button onclick="searchAccounts()">ê²€ìƒ‰</button>
        </div>

        <!-- ê³„ì •ìƒì„±/ì‚­ì œ ë²„íŠ¼ -->
        <div style="display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 10px;">
          <button onclick="openCreateAccountModal()">ê³„ì • ìƒì„±</button>
          <button onclick="deleteSelectedAccounts()">ê³„ì • ì‚­ì œ</button>
        </div>

        <!-- ê³„ì • í…Œì´ë¸” -->
        <table class="product-table">
          <thead>
            <tr>
              <th><input type="checkbox" onclick="toggleAllCheckboxes(this)"></th>
              <th>ì•„ì´ë””</th>
              <th>ì…ì ì‚¬ëª…</th>
              <th>ê³„ì •ìœ í˜•</th>
              <th>ê³„ì • ìƒì„±ì¼ì</th>
              <th>ì„¤ì •</th>
            </tr>
          </thead>
          <tbody id="accountTableBody">
            <!-- JSë¡œ ë™ì  ë Œë”ë§ -->
          </tbody>
        </table>
      </div>

      <!-- ì œí’ˆì„ íƒ ëª¨ë‹¬ (ì°¨íŠ¸ í•„í„°ìš©) -->
      <div id="productModal" class="modal-backdrop" style="display:none;">
        <div class="modal">
          <div class="modal-header">
            <span>ì œí’ˆ ì„ íƒ</span>
            <button id="closeProductModal" class="icon-btn" aria-label="close">âœ•</button>
          </div>

          <div class="modal-body">
            <div style="display:flex; gap:8px; align-items:center; margin-bottom:10px;">
              <input type="text" id="productSearchInputModal" 
                     placeholder="ì œí’ˆëª…/ì½”ë“œ ê²€ìƒ‰" 
                     style="flex:1; padding:8px;">
              <button id="productSearchBtnModal" class="filter-btn">ê²€ìƒ‰</button>
            </div>

            <div id="productListModal" class="product-list-modal">
              <!-- JSë¡œ ì²´í¬ë°•ìŠ¤ ë¦¬ìŠ¤íŠ¸ ë Œë” -->
            </div>
          </div>

          <div class="modal-footer">
            <button id="confirmProductSelection" class="filter-btn">í™•ì¸</button>
            <button id="cancelProductSelection" class="filter-btn">ì·¨ì†Œ</button>
          </div>
        </div>
      </div>

      <!-- ê³µê¸‰ì‚¬ ì„ íƒ ëª¨ë‹¬ (êµ¬ë²„ì „ - í˜¸í™˜ì„± ìœ ì§€) -->
      <div id="supplierModal" class="modal-backdrop" style="display:none;">
        <div class="modal">
          <div class="modal-header">
            <span>ê³µê¸‰ì‚¬ ì„ íƒ</span>
            <button id="closeSupplierModal" class="icon-btn" aria-label="close">âœ•</button>
          </div>
          <div class="modal-body">
            <div id="supplierListBox" style="max-height:50vh; overflow:auto;"></div>
          </div>
          <div class="modal-footer">
            <button id="confirmSupplier" class="filter-btn">í™•ì¸</button>
            <button id="cancelSupplier" class="filter-btn">ì·¨ì†Œ</button>
          </div>
        </div>
      </div>

      <!-- ê³µìš© ëª¨ë‹¬ (ëª¨ë“  ë™ì  í¼ìš©) -->
      <div id="modalRoot" class="modal-backdrop" style="display:none;">
        <div class="modal">
          <div class="modal-header">
            <span id="modalTitle">ì œëª©</span>
            <button class="icon-btn" aria-label="close" onclick="closeModal()">âœ•</button>
          </div>
          <div id="modalBody" class="modal-body"><!-- ë™ì  ì»¨í…ì¸  ì£¼ì… --></div>
          <div id="modalFooter" class="modal-footer"><!-- ë™ì  ë²„íŠ¼ ì£¼ì… --></div>
        </div>
      </div>

    </main>
  </div>


<!-- ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© - api.jsë¥¼ ë¨¼ì € ë¡œë“œ -->
<script src="/static/api.js?v=1"></script>
<script src="/static/chart.js?v=2"></script>
<script src="/static/nav.js?v=1"></script>
<script src="productList.js?v=2"></script>
<script src="/static/sellerList.js?v=1"></script>
<script src="/static/accountManager.js?v=20250811"></script>
<!--<script src="productFilter.js?v=1"></script>-->
<script src="/static/orderSummary.js?v=1"></script>
</body>

</html>